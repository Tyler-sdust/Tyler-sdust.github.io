[{"categories":null,"content":" 一个家用服务器常用服务的详细搭建教程，包括但不限于samba文件共享、FTP服务器、FRP内网穿透、AdGuard Home广告过滤、qBittorrent Web下载器等服务的搭建教程；文中所用文本编辑器为vim，不熟悉相关用法可用其他编辑器替代或自行百度相关命令及用法，本文不再赘述；以下内容在Ubuntu 20.04 LTS Server系统中完全适用，其他Linux系统由于包管理工具与软件安装路径的差异，相关配置可能略有出入。 目前只更新了samba的配置，后续会逐步完善内容(主要是Markdown语法我还没研究明白🤡) ","date":"2022-12-26","objectID":"/demo/:0:0","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"1. SAMBA文件共享 ","date":"2022-12-26","objectID":"/demo/:1:0","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"1.1 安装samba sudo apt install samba ","date":"2022-12-26","objectID":"/demo/:1:1","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"1.2 修改配置文件 sudo vim /etc/samba/smb.conf 在文件末尾添加以下配置： [share] #名称随便起 comment = samba home directory #共享目录的绝对路径 path = /home/share/smb/disk public = yes browseable = yes read only = no guest ok = no #选择一个本地用户作为登录用户名，注意此处以share为例，后面会用到 valid users = share #文件权限控制 create mask = 0755 #目录权限控制 directory mask = 0755 available = yes #关闭异步读取 aio read size = 0 ","date":"2022-12-26","objectID":"/demo/:1:2","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"1.3 检查配置文件 使用 testparm 命令检查添加的配置是否正确，出现以下提示则证明配置可用 ➜ ~ testparm Load smb config files from /etc/samba/smb.conf Loaded services file OK. Weak crypto is allowed Server role: ROLE_STANDALONE Press enter to see a dump of your service definitions ","date":"2022-12-26","objectID":"/demo/:1:3","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"1.4 启动samba服务并设置开机自启 #启动服务 sudo systemctl start smbd #设置开机自启 sudo systemctl enable smbd #查看服务状态 sudo systemctl status smbd ","date":"2022-12-26","objectID":"/demo/:1:4","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"1.5 为登录用户配置登陆密码并重启服务 #配置访问密码 sudo smbpasswd -a \u003cuser\u003e #\u003cuser\u003e为前文配置文件中配置的用户名share，命令执行后会要求设置密码 #注意配置密码时默认不显示输入： ➜ ~ sudo smbpasswd -a share New SMB password: Retype new SMB password: #密码配置完成后重启服务 sudo systemctl restart smbd ","date":"2022-12-26","objectID":"/demo/:1:5","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"1.6 测试samba能否正常使用 输入服务器主机名或IP地址+目录名称，然后输入用户名密码 ","date":"2022-12-26","objectID":"/demo/:1:6","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"2. FTP服务器 ","date":"2022-12-26","objectID":"/demo/:2:0","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"2.1 安装vsftpd sudo apt install vsftpd ","date":"2022-12-26","objectID":"/demo/:2:1","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"2.2 修改配置文件 以下是vsftpd的配置，基本配置条目已存在，只要取消注释或更改设置即可(配置文件中包含英文说明，某些主要的配置我会加上中文说明)： # Example config file /etc/vsftpd.conf # # The default compiled in settings are fairly paranoid. This sample file # loosens things up a bit, to make the ftp daemon more usable. # Please see vsftpd.conf.5 for all compiled in defaults. # # READ THIS: This example file is NOT an exhaustive list of vsftpd options. # Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd's # capabilities. # # # Run standalone? vsftpd can run either from an inetd or as a standalone # daemon started from an initscript. #以独立模式运行vsftpd listen=YES # # This directive enables listening on IPv6 sockets. By default, listening # on the IPv6 \"any\" address (::) will accept connections from both IPv6 # and IPv4 clients. It is not necessary to listen on *both* IPv4 and IPv6 # sockets. If you want that (perhaps because you want to listen on specific # addresses) then you must run two copies of vsftpd with two configuration # files. #listen_ipv6=NO # # Allow anonymous FTP? (Disabled by default). #禁止匿名登录 anonymous_enable=NO # # Uncomment this to allow local users to log in. #允许本地用户登录 local_enable=YES # # Uncomment this to enable any form of FTP write command. #允许写入，如果只想从FTP服务器读取或下载则可以改为NO write_enable=YES # # Default umask for local users is 077. You may wish to change this to 022, # if your users expect that (022 is used by most other ftpd's) #local_umask=022 # # Uncomment this to allow the anonymous FTP user to upload files. This only # has an effect if the above global write enable is activated. Also, you will # obviously need to create a directory writable by the FTP user. #anon_upload_enable=YES # # Uncomment this if you want the anonymous FTP user to be able to create # new directories. #anon_mkdir_write_enable=YES # # Activate directory messages - messages given to remote users when they # go into a certain directory. #欢迎语设置，会检查共享目录下是否有.message这个档案，如果有，则会回显此档案的内容 dirmessage_enable=YES # # If enabled, vsftpd will display directory listings with the time # in your local time zone. The default is to display GMT. The # times returned by the MDTM FTP command are also affected by this # option. #使用本地时间显示文件日期 use_localtime=YES # # Activate logging of uploads/downloads. #启用上传/下载日志记录 xferlog_enable=YES # # Make sure PORT transfer connections originate from port 20 (ftp-data). #通过20端口链接 connect_from_port_20=YES # # If you want, you can arrange for uploaded anonymous files to be owned by # a different user. Note! Using \"root\" for uploaded files is not # recommended! #chown_uploads=YES #chown_username=whoever # # You may override where the log file goes if you like. The default is shown # below. #xferlog_file=/var/log/vsftpd.log # # If you want, you can have your log file in standard ftpd xferlog format. # Note that the default log file location is /var/log/xferlog in this case. #xferlog_std_format=YES # # You may change the default value for timing out an idle session. #idle_session_timeout=600 # # You may change the default value for timing out a data connection. #data_connection_timeout=120 # # It is recommended that you define on your system a unique user which the # ftp server can use as a totally isolated and unprivileged user. #nopriv_user=ftpsecure # # Enable this and the server will recognise asynchronous ABOR requests. Not # recommended for security (the code is non-trivial). Not enabling it, # however, may confuse older FTP clients. #async_abor_enable=YES # # By default the server will pretend to allow ASCII mode but in fact ignore # the request. Turn on the below options to have the server actually do ASCII # mangling on files when in ASCII mode. # Beware that on some FTP servers, ASCII support allows a denial of service # attack (DoS) via the command \"SIZE /big/file\" in ASCII mode. vsftpd # predicted this attack and has always been safe, reporting the size of the # raw file. # ASCII mangling is a horrible feature of the protocol. #ascii_upload_enable=YES #ascii_dow","date":"2022-12-26","objectID":"/demo/:2:2","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"2.3 重启vsftpd服务 sudo service vsftpd restart ","date":"2022-12-26","objectID":"/demo/:2:3","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"2.4 测试配置是否正常 若配置正常但仍无法登录FTP并且已配置SSH登录，请检查/etc/ssh/sshd_config配置文件，将其中的SFTP服务配置全部注释掉 #SFTP服务 Subsystem sftp internal-sftp Match Group share ChrootDirectory /home/share/sftp ForceCommand internal-sftp PasswordAuthentication yes PermitTunnel no X11Forwarding no AllowTcpForwarding no AllowAgentForwarding no ","date":"2022-12-26","objectID":"/demo/:2:4","tags":null,"title":"家用Linux服务器通用服务搭建教程","uri":"/demo/"},{"categories":null,"content":"hugo框架快速搭建的Blog，目前还没有什么写文章的灵感🤨 哪天来劲了想写点啥再随缘更新吧 嗯，就这样✌ ","date":"2022-12-24","objectID":"/first_post/:1:0","tags":null,"title":"这里什么也没有","uri":"/first_post/"}]